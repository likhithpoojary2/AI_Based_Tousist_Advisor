{% extends "base.html" %}

   <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>


{% block body %}

        <section class="page-header">
            <div class="page-header__bg" style="background-image: url(../static/assets/images/backgrounds/page-header-bg-1-1.jpg);"></div><!-- /.page-header__bg -->
            <div class="container">
                <div class="page-header__content">
                    <h2 class="page-header__title bw-split-in-right">destination </h2>
                    <ul class="gotur-breadcrumb list-unstyled">
                        <li><a href="index-2.html">Home</a></li>
                        <li><span>destination</span></li>
                    </ul><!-- /.thm-breadcrumb list-unstyled -->
                </div><!-- /.page-header__content -->
            </div><!-- /.container -->
        </section><!-- /.page-header -->

        <section class="destination-two section-space">
            <div class="container">
                <div class="row gutter-y-30 gutter-x-30">
                    <div class="col-lg-8">
                        <div class="row gutter-y-30 gutter-x-30">

                            <h2><i class="fa-solid fa-plane-departure" style="color:orange"></i> &nbsp;Travel Destinations from {{ origin_city }}</h2>

                     

{% if affordable_destinations %}
                            <h3>Destinations within ₹{{ request.form.get('budget', '20000') }} budget:</h3>
                            {% for dest in affordable_destinations %}
                               
                            <div class="col-md-4 col-sm-6">
                                <div class="destination-card-two after-color-1 wow fadeInUp" data-wow-duration='1500ms' data-wow-delay='100ms'>
                                    <div class="destination-card-two__thumb">
                                        <img  src="{{ dest.imageUrl }}" alt="{{ dest.name }}" style="width:400px;height:300px;">
                                        <a href="#" class="destination-card-two__overly"></a>
                                      
                                       
                                    </div><!-- /.destination-card-two__thumb -->
                                    <div class="destination-card-two__content">
                                        <h3 class="destination-card-two__title"><a href="/destination-details">{{ dest.name }}</a></h3><!-- /.destination-card-two__title -->
                                       
                                    </div><!-- /.destination-one__content -->

                                    
                                </div><!-- /.destination-one -->
                                <p ><b>Weather:</b><i class="fa-solid fa-temperature-half"></i> {{ ", ".join(dest.weatherType) if dest.weatherType else "N/A" }}</p>
                                <p><b>Budget:</b> <i class="fa-solid fa-tag"></i>₹{{ dest.approximateBudget.price if dest.approximateBudget else "N/A" }}</p>
                            </div><!-- /.col-lg-4 col-md-4 col-sm-6 -->
                      
                            {% else %}
                                <p>No destinations found within this budget.</p>
                            {% endfor %}


                            {% endif %}

{% if matching_destinations %}

                            <h3>Destinations matching preferred weather:</h3>
                            {% for dest in matching_destinations %}
                              
                            <div class="col-md-4 col-sm-6">
                                <div class="destination-card-two after-color-1 wow fadeInUp" data-wow-duration='1500ms' data-wow-delay='100ms'>
                                    <div class="destination-card-two__thumb">
                                        <img  src="{{ dest.imageUrl }}" alt="{{ dest.name }}" style="width:400px;height:300px;">
                                        <a href="#" class="destination-card-two__overly"></a>
                                      
                                       
                                    </div><!-- /.destination-card-two__thumb -->
                                    <div class="destination-card-two__content">
                                        <h3 class="destination-card-two__title"><a href="destination-details.html">{{ dest.name }}</a></h3><!-- /.destination-card-two__title -->
                                       
                                    </div><!-- /.destination-one__content -->

                                    
                                </div><!-- /.destination-one -->
                                <p ><b>Weather:</b><i class="fa-solid fa-temperature-half"></i> {{ ", ".join(dest.weatherType) if dest.weatherType else "N/A" }}</p>
                                <p><b>Budget:</b> <i class="fa-solid fa-tag"></i>₹{{ dest.approximateBudget.price if dest.approximateBudget else "N/A" }}</p>
                            </div><!-- /.col-lg-4 col-md-4 col-sm-6 -->
                      
                            {% else %}
                                <p>No destinations found with the selected weather preference.</p>
                            {% endfor %}


                            {% endif %}




                            <h3>All Destinations:</h3>
                            {% for dest in destinations %}

                            <div class="col-md-4 col-sm-6">
                                <div class="destination-card-two after-color-1 wow fadeInUp" data-wow-duration='1500ms' data-wow-delay='100ms'>
                                    <div class="destination-card-two__thumb">
                                        <img  src="{{ dest.imageUrl }}" alt="{{ dest.name }}" style="width:400px;height:300px;">
                                        <a href="#" class="destination-card-two__overly"></a>
                                      
                                       
                                    </div><!-- /.destination-card-two__thumb -->
                                    <div class="destination-card-two__content">
                                        <h3 class="destination-card-two__title"><a href="destination-details.html">{{ dest.name }}</a></h3><!-- /.destination-card-two__title -->
                                       
                                    </div><!-- /.destination-one__content -->

                                    
                                </div><!-- /.destination-one -->
                                <p ><b>Weather:</b><i class="fa-solid fa-temperature-half"></i> {{ ", ".join(dest.weatherType) if dest.weatherType else "N/A" }}</p>
                                <p><b>Budget:</b> <i class="fa-solid fa-tag"></i>₹{{ dest.approximateBudget.price if dest.approximateBudget else "N/A" }}</p>
                            </div><!-- /.col-lg-4 col-md-4 col-sm-6 -->
                      
                            {% endfor %}


                  
                          


                            <div class="col-12">
                                <ul class="post-pagination justify-content-center" data-wow-duration='1500ms' data-wow-delay='500ms'>
                                    <li> <a href="#" class="previous">Previous</a> </li>
                                    <li> <a href="#">1</a></li>
                                    <li> <a href="#">2</a></li>
                                    <li> <a href="#">3</a></li>
                                    <li> <a href="#">...</a></li>
                                    <li class="active"> <a href="#" class="next">Next</a> </li>
                                </ul><!-- /.post-pagination -->
                            </div><!-- /.col-12 -->
                        </div><!-- /.row -->
                    </div><!-- /.col-lg-8 -->
                    <div class="col-lg-4">
                        <aside class="destination-details__sidebar">
                            <div class="destination-details__sidebar__item destination-details__sidebar__item-list wow fadeInUp" data-wow-duration='1500ms' data-wow-delay='500ms'>


                                <h4 class="destination-details__sidebar__title wow fadeInUp" data-wow-duration='1500ms' data-wow-delay='500ms'>Filter</h4><!-- /.destination-details__sidebar__title -->


                                <form method="POST">
                                    <label for="budget" style="color:green">Budget (₹):</label>
                                    <input type="number" name="budget" id="budget" placeholder="Enter budget" class="form-control" required>
                            
                                    <br><br>
                            
                                    <label style="color:green;">Preferred Weather:</label><br>
                                    <input type="checkbox" name="weather" value="Colder" class=""> Colder
                                    <input type="checkbox" name="weather" value="Snow"> Snow
                                    <input type="checkbox" name="weather" value="Sunny"> Sunny
                                    <input type="checkbox" name="weather" value="Rainy"> Rainy
                            
                                    <br><br>
                            
                                    <button type="submit" class="destination-details__sidebar__text btn btn-success"><i class="fa-solid fa-filter"></i>Filter</button>
                                    <button type="button" class="btn btn-warning" onclick="resetForm()">
    <i class="fa-solid fa-repeat"></i> Reset
</button>

<script>
    function resetForm() {
        document.querySelector("form").reset();
        window.location.href = "/destination";  // Redirect to reset filters
    }
</script>
                                </form>

                                
                                <ul class="destination-details__sidebar__list">
                                  
                                </ul>
                            </div><!-- /.destination-details__sidebar__item -->
                          
                        </aside><!-- /.destination-details__sidebar -->
                    </div><!-- /.col-lg-4 -->
                </div><!-- /.row -->
            </div><!-- /.container -->
        </section><!-- /.destination-two -->

        {% endblock body %}